import{d as S,z as V,r as h,E as F,w as A,f as l,e as s,k as C,u as r,q as R,m as z,g as e,x as d,j as n,p as u,G as H,H as Q,I as p,C as g,J as _,K as U,F as K,B as T,L as $}from"./app-D-Dwh-a6.js";import{u as D,_ as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-vK8ecvOX.js";import{Q as O}from"./vue-quill.snow-BT8MonYe.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-2mIrny3l.js";import"./useForwardExpose-BikwuZVg.js";import"./VisuallyHidden-BV8zdpCv.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B94x3pjn.js";const G=[{name:"Baringo",capital:"Kabarnet",code:30},{name:"Bomet",capital:"Bomet",code:36},{name:"Bungoma",capital:"Bungoma",code:39},{name:"Busia",capital:"Busia",code:40},{name:"Elgeyo-Marakwet",capital:"Iten",code:28},{name:"Embu",capital:"Embu",code:14},{name:"Garissa",capital:"Garissa",code:7},{name:"Homa Bay",capital:"Homa Bay",code:43},{name:"Isiolo",capital:"Isiolo",code:11},{name:"Kajiado",capital:"Kajiado",code:34},{name:"Kakamega",capital:"Kakamega",code:37},{name:"Kericho",capital:"Kericho",code:35},{name:"Kiambu",capital:"Kiambu",code:22},{name:"Kilifi",capital:"Kilifi",code:3},{name:"Kirinyaga",capital:"Kerugoya/Kutus",code:20},{name:"Kisii",capital:"Kisii",code:45},{name:"Kisumu",capital:"Kisumu",code:42},{name:"Kitui",capital:"Kitui",code:15},{name:"Kwale",capital:"Kwale",code:2},{name:"Laikipia",capital:"Rumuruti",code:31},{name:"Lamu",capital:"Lamu",code:5},{name:"Machakos",capital:"Machakos",code:16},{name:"Makueni",capital:"Wote",code:17},{name:"Mandera",capital:"Mandera",code:9},{name:"Marsabit",capital:"Marsabit",code:10},{name:"Meru",capital:"Meru",code:12},{name:"Migori",capital:"Migori",code:44},{name:"Mombasa",capital:"Mombasa City",code:1},{name:"Murang'a",capital:"Murang'a",code:21},{name:"Nairobi",capital:"Nairobi City",code:47},{name:"Nakuru",capital:"Nakuru",code:32},{name:"Nandi",capital:"Kapsabet",code:29},{name:"Narok",capital:"Narok",code:33},{name:"Nyamira",capital:"Nyamira",code:46},{name:"Nyandarua",capital:"Ol Kalou",code:18},{name:"Nyeri",capital:"Nyeri",code:19},{name:"Samburu",capital:"Maralal",code:25},{name:"Siaya",capital:"Siaya",code:41},{name:"Taita-Taveta",capital:"Voi",code:6},{name:"Tana River",capital:"Hola",code:4},{name:"Tharaka-Nithi",capital:"Chuka",code:13},{name:"Trans-Nzoia",capital:"Kitale",code:26},{name:"Turkana",capital:"Lodwar",code:23},{name:"Uasin Gishu",capital:"Eldoret",code:27},{name:"Vihiga",capital:"Vihiga",code:38},{name:"Wajir",capital:"Wajir",code:8},{name:"West Pokot",capital:"Kapenguria",code:24}],X=G.sort((w,x)=>w.name.localeCompare(x.name)),Y={class:"min-h-screen bg-gray-50 py-8 dark:bg-gray-900"},Z={class:"max-w-4xl px-4 sm:px-6 lg:px-8"},ee={class:"mt-12"},te={class:"mb-6 border-b border-gray-200 pb-4 dark:border-gray-700"},ae={key:0},re={class:"mb-8 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-700"},oe={class:"space-y-4"},le=["disabled"],se={key:0,class:"flex items-center"},ie={key:1},de={key:0,class:"space-y-2"},ne={class:"flex justify-between text-sm text-blue-600 dark:text-blue-400"},ue={class:"w-full bg-blue-200 rounded-full h-2"},ce={key:1,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},me={class:"flex items-center"},be={class:"text-sm mt-1"},pe={key:0,class:"font-medium"},ge={key:1},fe={key:2},ye={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},xe={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},ke={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},ve={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},he={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},_e={key:0},we=["value"],je={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},Me={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},Ce={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},Ke={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},qe={class:"mb-3 flex items-center justify-between"},Be=["disabled"],Ne={key:0,class:"mb-3 text-sm text-red-600 dark:text-red-400"},Ve={key:1,class:"space-y-3"},Ae={class:"flex-1"},Ue=["onUpdate:modelValue","placeholder"],Te={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Ee={class:"flex items-center gap-1 pt-3"},Ie=["disabled"],Je=["onClick"],Le={class:"flex items-center space-x-3 pt-2"},Se={key:0,class:"text-sm text-red-600 dark:text-red-400"},Fe={class:"pt-4"},Re=["disabled"],ze={key:0},He={key:1},E=15,Qe=S({__name:"Create",props:{data:Object,success:Boolean,raw_response:String},setup(w){const x=D(),b=V({image:null}),a=V({title:"",description:"",job_type:"",location:"",salary_min:null,salary_max:null,qualifications:[],is_active:!0}),j=w,k=h(!1),f=h(null),c=h([]),v=h(""),M=F(()=>c.value.length<E),q=()=>{M.value&&c.value.push("")},I=o=>{c.value.splice(o,1)};async function J(){if(!b.image){alert("Please select an image first");return}k.value=!0;try{await b.post("/health-jobs/upload",{preserveUrl:!0,onSuccess:o=>{const t=o.props.data;t&&(B(t),f.value=t)},onError:o=>{console.error("Upload failed:",o),alert("Failed to process image. Please try again.")},onFinish:()=>{k.value=!1}})}catch(o){console.error("Error:",o),k.value=!1,alert("An error occurred while processing the image.")}}function B(o){if(o.title&&(a.title=o.title),o.description&&(v.value=o.description,a.description=o.description),o.job_type){const t=o.job_type.toLowerCase().includes("full")?"full-time":"part-time";a.job_type=t}o.location&&(a.location=o.location),o.salary_min&&(a.salary_min=parseInt(o.salary_min)),o.salary_max&&(a.salary_max=parseInt(o.salary_max)),o.qualifications&&Array.isArray(o.qualifications)&&(c.value=o.qualifications.filter(t=>t.trim()))}A(v,o=>{a.description=o}),A(c,o=>{a.qualifications=o},{deep:!0}),j.data&&j.success&&B(j.data);function L(){a.description=v.value,a.qualifications=c.value.filter(o=>o.trim()!==""),a.post("/health-jobs/jobs")}const y=(o,t)=>a.errors[o]?`${t} border-red-500 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:focus:border-red-400 dark:focus:ring-red-400`:t;return(o,t)=>(s(),l(K,null,[C(r(R),{title:"Create Job"}),C(P,null,{default:z(()=>[e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[r(x)?.facility?(s(),l("h4",ae,n(r(x)?.facility.name),1)):d("",!0),t[8]||(t[8]=e("p",{class:"mt-4 text-gray-600 dark:text-gray-300"},"Upload an image to auto-populate the form, or fill it out manually",-1))]),e("section",re,[t[15]||(t[15]=e("h3",{class:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-4"}," ðŸ¤– AI Job Extraction ",-1)),t[16]||(t[16]=e("p",{class:"text-blue-700 dark:text-blue-300 mb-4"}," Upload an image of a job posting and let AI extract the details automatically ",-1)),e("div",oe,[e("div",null,[e("input",{type:"file",id:"ai-image",onInput:t[0]||(t[0]=i=>r(b).image=i.target.files[0]),class:"w-full px-3 py-2 border border-blue-300 rounded-md shadow-sm file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",accept:"image/*"},null,32)]),e("button",{type:"button",onClick:J,disabled:!r(b).image||k.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-medium py-2 px-6 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},[k.value?(s(),l("span",se,t[9]||(t[9]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" Processing with AI... ",-1)]))):(s(),l("span",ie,"Extract Job Details"))],8,le),r(b).progress?(s(),l("div",de,[e("div",ne,[t[10]||(t[10]=e("span",null,"Uploading...",-1)),e("span",null,n(r(b).progress.percentage)+"%",1)]),e("div",ue,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:H(`width: ${r(b).progress.percentage}%`)},null,4)])])):d("",!0),f.value?(s(),l("div",ce,[e("div",me,[t[14]||(t[14]=e("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),e("div",null,[t[12]||(t[12]=e("p",{class:"font-semibold"},"âœ… Job details extracted successfully!",-1)),e("p",be,[t[11]||(t[11]=u(" Found: ",-1)),f.value.title?(s(),l("span",pe,n(f.value.title),1)):d("",!0),f.value.location?(s(),l("span",ge," â€¢ "+n(f.value.location),1)):d("",!0),c.value.length>0?(s(),l("span",fe," â€¢ "+n(c.value.length)+" requirement(s)",1)):d("",!0)]),t[13]||(t[13]=e("p",{class:"text-sm text-green-600 mt-1"},"Review and edit the populated form below before submitting.",-1))])])])):d("",!0)])]),e("form",{onSubmit:Q(L,["prevent"]),class:"space-y-6 rounded-lg bg-white p-8 shadow-lg dark:bg-gray-800"},[e("div",ye,[e("div",null,[t[17]||(t[17]=e("label",{for:"title",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[u(" Job Title "),e("small",{class:"text-red-700"},"*")],-1)),p(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=i=>r(a).title=i),id:"title",placeholder:"e.g. Registered Nurse",required:"",class:g(y("title","w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-400 dark:focus:ring-blue-400"))},null,2),[[_,r(a).title]]),r(a).errors.title?(s(),l("div",xe,n(r(a).errors.title),1)):d("",!0)])]),e("div",null,[t[18]||(t[18]=e("label",{for:"description",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[u(" Description "),e("small",{class:"text-red-700"},"*")],-1)),e("div",{class:g(r(a).errors.description?"border-red-500 rounded-lg":"")},[C(r(O),{content:v.value,"onUpdate:content":t[2]||(t[2]=i=>v.value=i),"content-type":"html",placeholder:"Describe the job role and responsibilities",theme:"snow",toolbar:"full",class:"bg-white dark:bg-gray-700 rounded-lg"},null,8,["content"])],2),r(a).errors.description?(s(),l("div",ke,n(r(a).errors.description),1)):d("",!0)]),e("div",ve,[e("div",null,[t[20]||(t[20]=e("label",{for:"job_type",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[u(" Job Type "),e("small",{class:"text-red-700"},"*")],-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=i=>r(a).job_type=i),id:"job_type",required:"",class:g(y("job_type","w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-400 dark:focus:ring-blue-400"))},t[19]||(t[19]=[e("option",{value:"",disabled:""},"Select Job Type",-1),e("option",{value:"full-time"},"Full-Time",-1),e("option",{value:"part-time"},"Locum",-1)]),2),[[U,r(a).job_type]]),r(a).errors.job_type?(s(),l("div",he,n(r(a).errors.job_type),1)):d("",!0)]),r(x)?.facility?d("",!0):(s(),l("div",_e,[t[22]||(t[22]=e("label",{for:"location",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[u(" Location "),e("small",{class:"text-red-700"},"*")],-1)),p(e("select",{"onUpdate:modelValue":t[4]||(t[4]=i=>r(a).location=i),id:"location",required:"",class:g(y("location","w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-400 dark:focus:ring-blue-400"))},[t[21]||(t[21]=e("option",{value:"",disabled:""},"Select location",-1)),(s(!0),l(K,null,T(r(X),i=>(s(),l("option",{key:i.code,value:i.name},n(i.name),9,we))),128))],2),[[U,r(a).location]]),r(a).errors.location?(s(),l("div",je,n(r(a).errors.location),1)):d("",!0)]))]),e("div",Me,[e("div",null,[t[23]||(t[23]=e("label",{for:"salary_min",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[u(" Min Range ("),e("i",null,"Optional"),u(") ")],-1)),p(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=i=>r(a).salary_min=i),id:"salary_min",placeholder:"e.g. 35000",class:g(y("salary_min","w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-400 dark:focus:ring-blue-400"))},null,2),[[_,r(a).salary_min]]),r(a).errors.salary_min?(s(),l("div",Ce,n(r(a).errors.salary_min),1)):d("",!0)]),e("div",null,[t[24]||(t[24]=e("label",{for:"salary_max",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[u(" Max Range ("),e("i",null,"Optional"),u(") ")],-1)),p(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=i=>r(a).salary_max=i),id:"salary_max",placeholder:"e.g. 85000",class:g(y("salary_max","w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-400 dark:focus:ring-blue-400"))},null,2),[[_,r(a).salary_max]]),r(a).errors.salary_max?(s(),l("div",Ke,n(r(a).errors.salary_max),1)):d("",!0)])]),e("div",null,[e("div",qe,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[u(" Qualifications & Requirements ("),e("i",null,"Optional"),u(") ")],-1)),e("button",{type:"button",onClick:q,disabled:!M.value,class:"inline-flex items-center rounded-md border border-transparent bg-blue-100 px-3 py-2 text-sm leading-4 font-medium text-blue-700 hover:bg-blue-200 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 dark:bg-blue-900 dark:text-blue-400 dark:hover:bg-blue-800"},t[25]||(t[25]=[e("svg",{class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),u(" Add Qualification ",-1)]),8,Be)]),r(a).errors.qualifications?(s(),l("div",Ne,n(r(a).errors.qualifications),1)):d("",!0),c.value.length>0?(s(),l("div",Ve,[(s(!0),l(K,null,T(c.value,(i,m)=>(s(),l("div",{key:m,class:"flex items-start gap-3"},[e("div",Ae,[p(e("input",{"onUpdate:modelValue":N=>c.value[m]=N,type:"text",placeholder:`Qualification ${m+1} (e.g., Bachelor's degree in Nursing)`,class:g(y(`qualifications.${m}`,"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-400 dark:focus:ring-blue-400"))},null,10,Ue),[[_,c.value[m]]]),r(a).errors[`qualifications.${m}`]?(s(),l("div",Te,n(r(a).errors[`qualifications.${m}`]),1)):d("",!0)]),e("div",Ee,[e("button",{type:"button",onClick:q,disabled:!M.value,class:"flex-shrink-0 rounded-lg p-1.5 text-blue-600 transition-colors hover:bg-blue-50 hover:text-blue-800 disabled:cursor-not-allowed disabled:opacity-50 dark:text-blue-400 dark:hover:bg-blue-900 dark:hover:text-blue-300",title:"Add qualification"},t[27]||(t[27]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]),8,Ie),e("button",{type:"button",onClick:N=>I(m),class:"flex-shrink-0 rounded-lg p-1.5 text-red-600 transition-colors hover:bg-red-50 hover:text-red-800 dark:text-red-400 dark:hover:bg-red-900 dark:hover:text-red-300",title:"Remove qualification"},t[28]||(t[28]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Je)])]))),128))])):d("",!0),e("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"}," Add up to "+n(E)+" qualifications. These will appear as bullet points in the job listing. ")]),e("div",Le,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=i=>r(a).is_active=i),id:"is_active",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:ring-blue-400"},null,512),[[$,r(a).is_active]]),t[29]||(t[29]=e("label",{for:"is_active",class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Job is Active ",-1)),r(a).errors.is_active?(s(),l("div",Se,n(r(a).errors.is_active),1)):d("",!0)]),e("div",Fe,[e("button",{type:"submit",disabled:r(a).processing,class:"flex w-full items-center justify-center rounded-lg bg-blue-600 px-6 py-3.5 text-lg font-semibold text-white transition hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none disabled:opacity-50 dark:bg-blue-500 dark:hover:bg-blue-600 dark:focus:ring-blue-400 dark:focus:ring-offset-gray-800"},[r(a).processing?(s(),l("span",ze,"Creating Job...")):(s(),l("span",He,"Create Job"))],8,Re)])],32)])])])]),_:1})],64))}}),Ze=W(Qe,[["__scopeId","data-v-3333b6d9"]]);export{Ze as default};
