import{d as H,E as U,r as h,H as O,w as T,f as l,e as s,k as K,u as r,q as R,m as D,g as e,x as d,j as n,p as u,I as F,J as P,A as b,B as p,C as _,F as w,D as q,K as N,L as Q}from"./app-Bc679Qsh.js";import{u as $,_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cvg25dse.js";import{Q as W}from"./vue-quill.snow-CNblzWeI.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CpJ7SQBV.js";import"./useForwardExpose-CHa3pVpj.js";import"./VisuallyHidden-BZzgkYb2.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BlW-p2qV.js";const X=[{name:"Baringo",capital:"Kabarnet",code:30},{name:"Bomet",capital:"Bomet",code:36},{name:"Bungoma",capital:"Bungoma",code:39},{name:"Busia",capital:"Busia",code:40},{name:"Elgeyo-Marakwet",capital:"Iten",code:28},{name:"Embu",capital:"Embu",code:14},{name:"Garissa",capital:"Garissa",code:7},{name:"Homa Bay",capital:"Homa Bay",code:43},{name:"Isiolo",capital:"Isiolo",code:11},{name:"Kajiado",capital:"Kajiado",code:34},{name:"Kakamega",capital:"Kakamega",code:37},{name:"Kericho",capital:"Kericho",code:35},{name:"Kiambu",capital:"Kiambu",code:22},{name:"Kilifi",capital:"Kilifi",code:3},{name:"Kirinyaga",capital:"Kerugoya/Kutus",code:20},{name:"Kisii",capital:"Kisii",code:45},{name:"Kisumu",capital:"Kisumu",code:42},{name:"Kitui",capital:"Kitui",code:15},{name:"Kwale",capital:"Kwale",code:2},{name:"Laikipia",capital:"Rumuruti",code:31},{name:"Lamu",capital:"Lamu",code:5},{name:"Machakos",capital:"Machakos",code:16},{name:"Makueni",capital:"Wote",code:17},{name:"Mandera",capital:"Mandera",code:9},{name:"Marsabit",capital:"Marsabit",code:10},{name:"Meru",capital:"Meru",code:12},{name:"Migori",capital:"Migori",code:44},{name:"Mombasa",capital:"Mombasa City",code:1},{name:"Murang'a",capital:"Murang'a",code:21},{name:"Nairobi",capital:"Nairobi City",code:47},{name:"Nakuru",capital:"Nakuru",code:32},{name:"Nandi",capital:"Kapsabet",code:29},{name:"Narok",capital:"Narok",code:33},{name:"Nyamira",capital:"Nyamira",code:46},{name:"Nyandarua",capital:"Ol Kalou",code:18},{name:"Nyeri",capital:"Nyeri",code:19},{name:"Samburu",capital:"Maralal",code:25},{name:"Siaya",capital:"Siaya",code:41},{name:"Taita-Taveta",capital:"Voi",code:6},{name:"Tana River",capital:"Hola",code:4},{name:"Tharaka-Nithi",capital:"Chuka",code:13},{name:"Trans-Nzoia",capital:"Kitale",code:26},{name:"Turkana",capital:"Lodwar",code:23},{name:"Uasin Gishu",capital:"Eldoret",code:27},{name:"Vihiga",capital:"Vihiga",code:38},{name:"Wajir",capital:"Wajir",code:8},{name:"West Pokot",capital:"Kapenguria",code:24}],Y=X.sort((C,x)=>C.name.localeCompare(x.name)),Z={class:"min-h-screen bg-gray-50 py-8 dark:bg-gray-900"},ee={class:"max-w-4xl px-4 sm:px-6 lg:px-8"},te={class:"mt-12"},ae={class:"mb-6 border-b border-gray-200 pb-4 dark:border-gray-700"},re={key:0},oe={class:"mb-8 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-700"},le={class:"space-y-4"},se=["disabled"],ie={key:0,class:"flex items-center"},de={key:1},ne={key:0,class:"space-y-2"},ue={class:"flex justify-between text-sm text-blue-600 dark:text-blue-400"},ce={class:"w-full bg-blue-200 rounded-full h-2"},me={key:1,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},be={class:"flex items-center"},pe={class:"text-sm mt-1"},ge={key:0,class:"font-medium"},fe={key:1},ye={key:2},xe={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},ke={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},ve=["value"],he={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},_e={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},we={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},Ce={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},je={key:0},Me=["value"],Ke={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},qe={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},Ne={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},Be={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},Ve={class:"mb-3 flex items-center justify-between"},Ae=["disabled"],Ue={key:0,class:"mb-3 text-sm text-red-600 dark:text-red-400"},Te={key:1,class:"space-y-3"},Ee={class:"flex-1"},Ie=["onUpdate:modelValue","placeholder"],Se={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Je={class:"flex items-center gap-1 pt-3"},Le=["disabled"],He=["onClick"],Oe={class:"flex items-center space-x-3 pt-2"},Re={key:0,class:"text-sm text-red-600 dark:text-red-400"},De={class:"pt-4"},Fe=["disabled"],Pe={key:0},Qe={key:1},E=15,$e=H({__name:"Create",props:{data:Object,success:Boolean,raw_response:String},setup(C){const x=$(),g=U({image:null}),I=[{cadre_name:"Clinical Officer"},{cadre_name:"Nurse"},{cadre_name:"Pharmacist"},{cadre_name:"Dentist"},{cadre_name:"Lab Technician"},{cadre_name:"Para Medics"},{cadre_name:"Nutritionist & Dietetics Officer"},{cadre_name:"Public Health Officer"},{cadre_name:"Health Record Officer"},{cadre_name:"Bio Chemist Social Worker"},{cadre_name:"Community Health Officer"},{cadre_name:"Radiology"}],a=U({title:"",description:"",job_type:"",cadre:"",location:"",salary_min:null,salary_max:null,qualifications:[],is_active:!0}),j=C,k=h(!1),y=h(null),c=h([]),v=h(""),M=O(()=>c.value.length<E),B=()=>{M.value&&c.value.push("")},S=o=>{c.value.splice(o,1)};async function J(){if(!g.image){alert("Please select an image first");return}k.value=!0;try{await g.post("/health-jobs/upload",{preserveUrl:!0,onSuccess:o=>{const t=o.props.data;t&&(V(t),y.value=t)},onError:o=>{console.error("Upload failed:",o),alert("Failed to process image. Please try again.")},onFinish:()=>{k.value=!1}})}catch(o){console.error("Error:",o),k.value=!1,alert("An error occurred while processing the image.")}}function V(o){if(o.title&&(a.title=o.title),o.description&&(v.value=o.description,a.description=o.description),o.job_type){const t=o.job_type.toLowerCase().includes("full")?"full-time":"part-time";a.job_type=t}o.location&&(a.location=o.location),o.salary_min&&(a.salary_min=parseInt(o.salary_min)),o.salary_max&&(a.salary_max=parseInt(o.salary_max)),o.qualifications&&Array.isArray(o.qualifications)&&(c.value=o.qualifications.filter(t=>t.trim()))}T(v,o=>{a.description=o}),T(c,o=>{a.qualifications=o},{deep:!0}),j.data&&j.success&&V(j.data);function L(){a.description=v.value,a.qualifications=c.value.filter(o=>o.trim()!==""),a.post("/health-jobs/jobs")}const f=(o,t)=>a.errors[o]?`${t} border-red-500 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:focus:border-red-400 dark:focus:ring-red-400`:t;return(o,t)=>(s(),l(w,null,[K(r(R),{title:"Create Job"}),K(z,null,{default:D(()=>[e("div",Z,[e("div",ee,[e("div",te,[e("div",ae,[r(x)?.facility?(s(),l("h4",re,n(r(x)?.facility.name),1)):d("",!0),t[9]||(t[9]=e("p",{class:"mt-4 text-gray-600 dark:text-gray-300"},"Upload an image to auto-populate the form, or fill it out manually",-1))]),e("section",oe,[t[16]||(t[16]=e("h3",{class:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-4"}," ðŸ¤– AI Job Extraction ",-1)),t[17]||(t[17]=e("p",{class:"text-blue-700 dark:text-blue-300 mb-4"}," Upload an image of a job posting and let AI extract the details automatically ",-1)),e("div",le,[e("div",null,[e("input",{type:"file",id:"ai-image",onInput:t[0]||(t[0]=i=>r(g).image=i.target.files[0]),class:"w-full px-3 py-2 border border-blue-300 rounded-md shadow-sm file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",accept:"image/*"},null,32)]),e("button",{type:"button",onClick:J,disabled:!r(g).image||k.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-medium py-2 px-6 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},[k.value?(s(),l("span",ie,t[10]||(t[10]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" Processing with AI... ",-1)]))):(s(),l("span",de,"Extract Job Details"))],8,se),r(g).progress?(s(),l("div",ne,[e("div",ue,[t[11]||(t[11]=e("span",null,"Uploading...",-1)),e("span",null,n(r(g).progress.percentage)+"%",1)]),e("div",ce,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:F(`width: ${r(g).progress.percentage}%`)},null,4)])])):d("",!0),y.value?(s(),l("div",me,[e("div",be,[t[15]||(t[15]=e("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),e("div",null,[t[13]||(t[13]=e("p",{class:"font-semibold"},"âœ… Job details extracted successfully!",-1)),e("p",pe,[t[12]||(t[12]=u(" Found: ",-1)),y.value.title?(s(),l("span",ge,n(y.value.title),1)):d("",!0),y.value.location?(s(),l("span",fe," â€¢ "+n(y.value.location),1)):d("",!0),c.value.length>0?(s(),l("span",ye," â€¢ "+n(c.value.length)+" requirement(s)",1)):d("",!0)]),t[14]||(t[14]=e("p",{class:"text-sm text-green-600 mt-1"},"Review and edit the populated form below before submitting.",-1))])])])):d("",!0)])]),e("form",{onSubmit:P(L,["prevent"]),class:"space-y-6 rounded-lg bg-white p-8 shadow-lg dark:bg-gray-800"},[e("div",xe,[e("div",null,[t[18]||(t[18]=e("label",{for:"title",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[u(" Job Title "),e("small",{class:"text-red-700"},"*")],-1)),b(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=i=>r(a).title=i),id:"title",placeholder:"e.g. Registered Nurse",required:"",class:p(f("title","w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-400 dark:focus:ring-blue-400"))},null,2),[[_,r(a).title]]),r(a).errors.title?(s(),l("div",ke,n(r(a).errors.title),1)):d("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{for:"cadre",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[u(" Cadre "),e("small",{class:"text-red-700"},"*")],-1)),b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>r(a).cadre=i),id:"cadre",required:"",class:p(f("cadre","w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-400 dark:focus:ring-blue-400"))},[t[19]||(t[19]=e("option",{disabled:""},"Select Cadre",-1)),(s(),l(w,null,q(I,i=>e("option",{key:i.cadre_name,value:i.cadre_name},n(i.cadre_name),9,ve)),64))],2),[[N,r(a).cadre]]),r(a).errors.cadre?(s(),l("div",he,n(r(a).errors.cadre),1)):d("",!0)])]),e("div",null,[t[21]||(t[21]=e("label",{for:"description",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[u(" Description "),e("small",{class:"text-red-700"},"*")],-1)),e("div",{class:p(r(a).errors.description?"border-red-500 rounded-lg":"")},[K(r(W),{content:v.value,"onUpdate:content":t[3]||(t[3]=i=>v.value=i),"content-type":"html",placeholder:"Describe the job role and responsibilities",theme:"snow",toolbar:"full",class:"bg-white dark:bg-gray-700 rounded-lg"},null,8,["content"])],2),r(a).errors.description?(s(),l("div",_e,n(r(a).errors.description),1)):d("",!0)]),e("div",we,[e("div",null,[t[23]||(t[23]=e("label",{for:"job_type",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[u(" Job Type "),e("small",{class:"text-red-700"},"*")],-1)),b(e("select",{"onUpdate:modelValue":t[4]||(t[4]=i=>r(a).job_type=i),id:"job_type",required:"",class:p(f("job_type","w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-400 dark:focus:ring-blue-400"))},t[22]||(t[22]=[e("option",{value:"",disabled:""},"Select Job Type",-1),e("option",{value:"full-time"},"Full-Time",-1),e("option",{value:"part-time"},"Locum",-1)]),2),[[N,r(a).job_type]]),r(a).errors.job_type?(s(),l("div",Ce,n(r(a).errors.job_type),1)):d("",!0)]),r(x)?.facility?d("",!0):(s(),l("div",je,[t[25]||(t[25]=e("label",{for:"location",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[u(" Location "),e("small",{class:"text-red-700"},"*")],-1)),b(e("select",{"onUpdate:modelValue":t[5]||(t[5]=i=>r(a).location=i),id:"location",required:"",class:p(f("location","w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-400 dark:focus:ring-blue-400"))},[t[24]||(t[24]=e("option",{value:"",disabled:""},"Select location",-1)),(s(!0),l(w,null,q(r(Y),i=>(s(),l("option",{key:i.code,value:i.name},n(i.name),9,Me))),128))],2),[[N,r(a).location]]),r(a).errors.location?(s(),l("div",Ke,n(r(a).errors.location),1)):d("",!0)]))]),e("div",qe,[e("div",null,[t[26]||(t[26]=e("label",{for:"salary_min",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[u(" Min Range ("),e("i",null,"Optional"),u(") ")],-1)),b(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=i=>r(a).salary_min=i),id:"salary_min",placeholder:"e.g. 35000",class:p(f("salary_min","w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-400 dark:focus:ring-blue-400"))},null,2),[[_,r(a).salary_min]]),r(a).errors.salary_min?(s(),l("div",Ne,n(r(a).errors.salary_min),1)):d("",!0)]),e("div",null,[t[27]||(t[27]=e("label",{for:"salary_max",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[u(" Max Range ("),e("i",null,"Optional"),u(") ")],-1)),b(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=i=>r(a).salary_max=i),id:"salary_max",placeholder:"e.g. 85000",class:p(f("salary_max","w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-400 dark:focus:ring-blue-400"))},null,2),[[_,r(a).salary_max]]),r(a).errors.salary_max?(s(),l("div",Be,n(r(a).errors.salary_max),1)):d("",!0)])]),e("div",null,[e("div",Ve,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[u(" Qualifications & Requirements ("),e("i",null,"Optional"),u(") ")],-1)),e("button",{type:"button",onClick:B,disabled:!M.value,class:"inline-flex items-center rounded-md border border-transparent bg-blue-100 px-3 py-2 text-sm leading-4 font-medium text-blue-700 hover:bg-blue-200 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 dark:bg-blue-900 dark:text-blue-400 dark:hover:bg-blue-800"},t[28]||(t[28]=[e("svg",{class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),u(" Add Qualification ",-1)]),8,Ae)]),r(a).errors.qualifications?(s(),l("div",Ue,n(r(a).errors.qualifications),1)):d("",!0),c.value.length>0?(s(),l("div",Te,[(s(!0),l(w,null,q(c.value,(i,m)=>(s(),l("div",{key:m,class:"flex items-start gap-3"},[e("div",Ee,[b(e("input",{"onUpdate:modelValue":A=>c.value[m]=A,type:"text",placeholder:`Qualification ${m+1} (e.g., Bachelor's degree in Nursing)`,class:p(f(`qualifications.${m}`,"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-400 dark:focus:ring-blue-400"))},null,10,Ie),[[_,c.value[m]]]),r(a).errors[`qualifications.${m}`]?(s(),l("div",Se,n(r(a).errors[`qualifications.${m}`]),1)):d("",!0)]),e("div",Je,[e("button",{type:"button",onClick:B,disabled:!M.value,class:"flex-shrink-0 rounded-lg p-1.5 text-blue-600 transition-colors hover:bg-blue-50 hover:text-blue-800 disabled:cursor-not-allowed disabled:opacity-50 dark:text-blue-400 dark:hover:bg-blue-900 dark:hover:text-blue-300",title:"Add qualification"},t[30]||(t[30]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]),8,Le),e("button",{type:"button",onClick:A=>S(m),class:"flex-shrink-0 rounded-lg p-1.5 text-red-600 transition-colors hover:bg-red-50 hover:text-red-800 dark:text-red-400 dark:hover:bg-red-900 dark:hover:text-red-300",title:"Remove qualification"},t[31]||(t[31]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,He)])]))),128))])):d("",!0),e("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"}," Add up to "+n(E)+" qualifications. These will appear as bullet points in the job listing. ")]),e("div",Oe,[b(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=i=>r(a).is_active=i),id:"is_active",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:ring-blue-400"},null,512),[[Q,r(a).is_active]]),t[32]||(t[32]=e("label",{for:"is_active",class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Job is Active ",-1)),r(a).errors.is_active?(s(),l("div",Re,n(r(a).errors.is_active),1)):d("",!0)]),e("div",De,[e("button",{type:"submit",disabled:r(a).processing,class:"flex w-full items-center justify-center rounded-lg bg-blue-600 px-6 py-3.5 text-lg font-semibold text-white transition hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none disabled:opacity-50 dark:bg-blue-500 dark:hover:bg-blue-600 dark:focus:ring-blue-400 dark:focus:ring-offset-gray-800"},[r(a).processing?(s(),l("span",Pe,"Creating Job...")):(s(),l("span",Qe,"Create Job"))],8,Fe)])],32)])])])]),_:1})],64))}}),at=G($e,[["__scopeId","data-v-f788618c"]]);export{at as default};
