import{d as E,y as B,r as x,E as F,w as q,f as i,e as s,k as M,u as l,q as L,m as S,g as e,j as c,z as b,p as n,G as R,H,I as p,J as v,K as V,F as j,B as A,L as Q}from"./app-BzsKGx_I.js";import{u as z,_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-DXgnIO0Y.js";import{Q as P}from"./vue-quill.snow-CfqAQxHC.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-ByMugNPT.js";import"./useForwardExpose-DHlL4Uvl.js";import"./VisuallyHidden-BO1Ajys0.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Cc1w8wWS.js";const W=[{name:"Baringo",capital:"Kabarnet",code:30},{name:"Bomet",capital:"Bomet",code:36},{name:"Bungoma",capital:"Bungoma",code:39},{name:"Busia",capital:"Busia",code:40},{name:"Elgeyo-Marakwet",capital:"Iten",code:28},{name:"Embu",capital:"Embu",code:14},{name:"Garissa",capital:"Garissa",code:7},{name:"Homa Bay",capital:"Homa Bay",code:43},{name:"Isiolo",capital:"Isiolo",code:11},{name:"Kajiado",capital:"Kajiado",code:34},{name:"Kakamega",capital:"Kakamega",code:37},{name:"Kericho",capital:"Kericho",code:35},{name:"Kiambu",capital:"Kiambu",code:22},{name:"Kilifi",capital:"Kilifi",code:3},{name:"Kirinyaga",capital:"Kerugoya/Kutus",code:20},{name:"Kisii",capital:"Kisii",code:45},{name:"Kisumu",capital:"Kisumu",code:42},{name:"Kitui",capital:"Kitui",code:15},{name:"Kwale",capital:"Kwale",code:2},{name:"Laikipia",capital:"Rumuruti",code:31},{name:"Lamu",capital:"Lamu",code:5},{name:"Machakos",capital:"Machakos",code:16},{name:"Makueni",capital:"Wote",code:17},{name:"Mandera",capital:"Mandera",code:9},{name:"Marsabit",capital:"Marsabit",code:10},{name:"Meru",capital:"Meru",code:12},{name:"Migori",capital:"Migori",code:44},{name:"Mombasa",capital:"Mombasa City",code:1},{name:"Murang'a",capital:"Murang'a",code:21},{name:"Nairobi",capital:"Nairobi City",code:47},{name:"Nakuru",capital:"Nakuru",code:32},{name:"Nandi",capital:"Kapsabet",code:29},{name:"Narok",capital:"Narok",code:33},{name:"Nyamira",capital:"Nyamira",code:46},{name:"Nyandarua",capital:"Ol Kalou",code:18},{name:"Nyeri",capital:"Nyeri",code:19},{name:"Samburu",capital:"Maralal",code:25},{name:"Siaya",capital:"Siaya",code:41},{name:"Taita-Taveta",capital:"Voi",code:6},{name:"Tana River",capital:"Hola",code:4},{name:"Tharaka-Nithi",capital:"Chuka",code:13},{name:"Trans-Nzoia",capital:"Kitale",code:26},{name:"Turkana",capital:"Lodwar",code:23},{name:"Uasin Gishu",capital:"Eldoret",code:27},{name:"Vihiga",capital:"Vihiga",code:38},{name:"Wajir",capital:"Wajir",code:8},{name:"West Pokot",capital:"Kapenguria",code:24}],G=W.sort((h,g)=>h.name.localeCompare(g.name)),$={class:"min-h-screen bg-gray-50 py-8 dark:bg-gray-900"},X={class:"max-w-4xl px-4 sm:px-6 lg:px-8"},Y={class:"mt-12"},Z={class:"mb-6 border-b border-gray-200 pb-4 dark:border-gray-700"},ee={key:0},ae={key:1},te={class:"mb-8 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-700"},oe={class:"space-y-4"},le=["disabled"],re={key:0,class:"flex items-center"},ie={key:1},se={key:0,class:"space-y-2"},ne={class:"flex justify-between text-sm text-blue-600 dark:text-blue-400"},de={class:"w-full bg-blue-200 rounded-full h-2"},ue={key:1,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},ce={class:"flex items-center"},be={class:"text-sm mt-1"},pe={key:0,class:"font-medium"},me={key:1},ge={key:2},fe={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},ye={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},ke={key:0},xe=["value"],ve={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},he={class:"mb-3 flex items-center justify-between"},we=["disabled"],_e={key:0,class:"space-y-3"},Me={class:"flex-1"},je=["onUpdate:modelValue","placeholder"],Ce={class:"flex items-center gap-1"},Ke=["disabled"],Ne=["onClick"],Be={class:"flex items-center space-x-3 pt-2"},qe={class:"pt-4"},Ve=["disabled"],Ae={key:0},Te={key:1},T=15,Ue=E({__name:"Create",props:{data:Object,success:Boolean,raw_response:String},setup(h){const g=z(),u=B({image:null}),o=B({title:"",description:"",job_type:"",location:"",salary_min:null,salary_max:null,qualifications:[],is_active:!0}),w=h,f=x(!1),m=x(null),d=x([]),y=x(""),_=F(()=>d.value.length<T),C=()=>{_.value&&d.value.push("")},U=t=>{d.value.splice(t,1)};async function I(){if(!u.image){alert("Please select an image first");return}f.value=!0;try{await u.post("/health-jobs/upload",{onSuccess:t=>{const a=t.props.data;a&&(K(a),m.value=a)},onError:t=>{console.error("Upload failed:",t),alert("Failed to process image. Please try again.")},onFinish:()=>{f.value=!1}})}catch(t){console.error("Error:",t),f.value=!1,alert("An error occurred while processing the image.")}}function K(t){if(t.title&&(o.title=t.title),t.description&&(y.value=t.description,o.description=t.description),t.job_type){const a=t.job_type.toLowerCase().includes("full")?"full-time":"part-time";o.job_type=a}t.location&&(o.location=t.location),t.salary_min&&(o.salary_min=parseInt(t.salary_min)),t.salary_max&&(o.salary_max=parseInt(t.salary_max)),t.qualifications&&Array.isArray(t.qualifications)&&(d.value=t.qualifications.filter(a=>a.trim()))}q(y,t=>{o.description=t}),q(d,t=>{o.qualifications=t},{deep:!0}),w.data&&w.success&&K(w.data);function J(){o.description=y.value,o.qualifications=d.value.filter(t=>t.trim()!==""),o.post("/health-jobs/jobs")}return(t,a)=>(s(),i(j,null,[M(l(L),{title:"Create Job"}),M(D,null,{default:S(()=>[e("div",$,[e("div",X,[e("div",Y,[e("div",Z,[l(g)?.facility?(s(),i("h4",ee,c(l(g)?.facility.name),1)):(s(),i("h4",ae,"No Facility")),a[8]||(a[8]=e("p",{class:"mt-4 text-gray-600 dark:text-gray-300"},"Upload an image to auto-populate the form, or fill it out manually",-1))]),e("section",te,[a[15]||(a[15]=e("h3",{class:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-4"}," ðŸ¤– AI Job Extraction ",-1)),a[16]||(a[16]=e("p",{class:"text-blue-700 dark:text-blue-300 mb-4"}," Upload an image of a job posting and let AI extract the details automatically ",-1)),e("div",oe,[e("div",null,[e("input",{type:"file",id:"ai-image",onInput:a[0]||(a[0]=r=>l(u).image=r.target.files[0]),class:"w-full px-3 py-2 border border-blue-300 rounded-md shadow-sm file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",accept:"image/*"},null,32)]),e("button",{type:"button",onClick:I,disabled:!l(u).image||f.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-medium py-2 px-6 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},[f.value?(s(),i("span",re,a[9]||(a[9]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),n(" Processing with AI... ",-1)]))):(s(),i("span",ie,"Extract Job Details"))],8,le),l(u).progress?(s(),i("div",se,[e("div",ne,[a[10]||(a[10]=e("span",null,"Uploading...",-1)),e("span",null,c(l(u).progress.percentage)+"%",1)]),e("div",de,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:R(`width: ${l(u).progress.percentage}%`)},null,4)])])):b("",!0),m.value?(s(),i("div",ue,[e("div",ce,[a[14]||(a[14]=e("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),e("div",null,[a[12]||(a[12]=e("p",{class:"font-semibold"},"âœ… Job details extracted successfully!",-1)),e("p",be,[a[11]||(a[11]=n(" Found: ",-1)),m.value.title?(s(),i("span",pe,c(m.value.title),1)):b("",!0),m.value.location?(s(),i("span",me," â€¢ "+c(m.value.location),1)):b("",!0),d.value.length>0?(s(),i("span",ge," â€¢ "+c(d.value.length)+" requirement(s)",1)):b("",!0)]),a[13]||(a[13]=e("p",{class:"text-sm text-green-600 mt-1"},"Review and edit the populated form below before submitting.",-1))])])])):b("",!0)])]),e("form",{onSubmit:H(J,["prevent"]),class:"space-y-6 rounded-lg bg-white p-8 shadow-lg dark:bg-gray-800"},[e("div",fe,[e("div",null,[a[17]||(a[17]=e("label",{for:"title",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[n(" Job Title "),e("small",{class:"text-red-700"},"*")],-1)),p(e("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=r=>l(o).title=r),id:"title",placeholder:"e.g. Registered Nurse",required:"",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-400 dark:focus:ring-blue-400"},null,512),[[v,l(o).title]])])]),e("div",null,[a[18]||(a[18]=e("label",{for:"description",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[n(" Description "),e("small",{class:"text-red-700"},"*")],-1)),M(l(P),{content:y.value,"onUpdate:content":a[2]||(a[2]=r=>y.value=r),"content-type":"html",placeholder:"Describe the job role and responsibilities",theme:"snow",toolbar:"full",class:"bg-white dark:bg-gray-700 rounded-lg"},null,8,["content"])]),e("div",ye,[e("div",null,[a[20]||(a[20]=e("label",{for:"job_type",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[n(" Job Type "),e("small",{class:"text-red-700"},"*")],-1)),p(e("select",{"onUpdate:modelValue":a[3]||(a[3]=r=>l(o).job_type=r),id:"job_type",required:"",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-400 dark:focus:ring-blue-400"},a[19]||(a[19]=[e("option",{value:"",disabled:""},"Select Job Type",-1),e("option",{value:"full-time"},"Full-Time",-1),e("option",{value:"part-time"},"Locum",-1)]),512),[[V,l(o).job_type]])]),l(g)?.facility?b("",!0):(s(),i("div",ke,[a[22]||(a[22]=e("label",{for:"location",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[n(" Location "),e("small",{class:"text-red-700"},"*")],-1)),p(e("select",{"onUpdate:modelValue":a[4]||(a[4]=r=>l(o).location=r),id:"location",required:"",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-400 dark:focus:ring-blue-400"},[a[21]||(a[21]=e("option",{value:"",disabled:""},"Select location",-1)),(s(!0),i(j,null,A(l(G),r=>(s(),i("option",{key:r.code,value:r.name},c(r.name),9,xe))),128))],512),[[V,l(o).location]])]))]),e("div",ve,[e("div",null,[a[23]||(a[23]=e("label",{for:"salary_min",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[n(" Min Range ("),e("i",null,"Optional"),n(") ")],-1)),p(e("input",{type:"number","onUpdate:modelValue":a[5]||(a[5]=r=>l(o).salary_min=r),id:"salary_min",placeholder:"e.g. 35000",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-400 dark:focus:ring-blue-400"},null,512),[[v,l(o).salary_min]])]),e("div",null,[a[24]||(a[24]=e("label",{for:"salary_max",class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[n(" Max Range ("),e("i",null,"Optional"),n(") ")],-1)),p(e("input",{type:"number","onUpdate:modelValue":a[6]||(a[6]=r=>l(o).salary_max=r),id:"salary_max",placeholder:"e.g. 85000",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:ring-blue-400 dark:focus:ring-blue-400"},null,512),[[v,l(o).salary_max]])])]),e("div",null,[e("div",he,[a[26]||(a[26]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[n(" Qualifications & Requirements ("),e("i",null,"Optional"),n(") ")],-1)),e("button",{type:"button",onClick:C,disabled:!_.value,class:"inline-flex items-center rounded-md border border-transparent bg-blue-100 px-3 py-2 text-sm leading-4 font-medium text-blue-700 hover:bg-blue-200 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 dark:bg-blue-900 dark:text-blue-400 dark:hover:bg-blue-800"},a[25]||(a[25]=[e("svg",{class:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),n(" Add Qualification ",-1)]),8,we)]),d.value.length>0?(s(),i("div",_e,[(s(!0),i(j,null,A(d.value,(r,k)=>(s(),i("div",{key:k,class:"flex items-center gap-3"},[e("div",Me,[p(e("input",{"onUpdate:modelValue":N=>d.value[k]=N,type:"text",placeholder:`Qualification ${k+1} (e.g., Bachelor's degree in Nursing)`,class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-400 dark:focus:ring-blue-400"},null,8,je),[[v,d.value[k]]])]),e("div",Ce,[e("button",{type:"button",onClick:C,disabled:!_.value,class:"flex-shrink-0 rounded-lg p-1.5 text-blue-600 transition-colors hover:bg-blue-50 hover:text-blue-800 disabled:cursor-not-allowed disabled:opacity-50 dark:text-blue-400 dark:hover:bg-blue-900 dark:hover:text-blue-300",title:"Add qualification"},a[27]||(a[27]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]),8,Ke),e("button",{type:"button",onClick:N=>U(k),class:"flex-shrink-0 rounded-lg p-1.5 text-red-600 transition-colors hover:bg-red-50 hover:text-red-800 dark:text-red-400 dark:hover:bg-red-900 dark:hover:text-red-300",title:"Remove qualification"},a[28]||(a[28]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Ne)])]))),128))])):b("",!0),e("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"}," Add up to "+c(T)+" qualifications. These will appear as bullet points in the job listing. ")]),e("div",Be,[p(e("input",{type:"checkbox","onUpdate:modelValue":a[7]||(a[7]=r=>l(o).is_active=r),id:"is_active",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:ring-blue-400"},null,512),[[Q,l(o).is_active]]),a[29]||(a[29]=e("label",{for:"is_active",class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Job is Active ",-1))]),e("div",qe,[e("button",{type:"submit",disabled:l(o).processing,class:"flex w-full items-center justify-center rounded-lg bg-blue-600 px-6 py-3.5 text-lg font-semibold text-white transition hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none disabled:opacity-50 dark:bg-blue-500 dark:hover:bg-blue-600 dark:focus:ring-blue-400 dark:focus:ring-offset-gray-800"},[l(o).processing?(s(),i("span",Ae,"Creating Job...")):(s(),i("span",Te,"Create Job"))],8,Ve)])],32)])])])]),_:1})],64))}}),Qe=O(Ue,[["__scopeId","data-v-c667b441"]]);export{Qe as default};
