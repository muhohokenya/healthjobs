import{d as Z,j as A,B as _,k as ee,e as k,o as l,w as p,a as n,b as a,u as s,h as te,c as d,m as v,t as i,E as ae,H as oe,g as u,F as se,r as re,q as y,D as w,f as ie,K as C}from"./app-B6j8tvNk.js";import{u as le,B as U,X as ne,F as T,_ as de,U as ce,S as ue}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bwb2OMHj.js";import{c as N,_ as f}from"./index-B_5j16RA.js";import{_ as V,C as B}from"./Checkbox.vue_vue_type_script_setup_true_lang-BqzSfs2F.js";import{M as z,P as R,C as ge}from"./phone-UAFDjCk7.js";import"./useForwardExpose-DfF-zOZZ.js";import"./VisuallyHidden-VD6W6MtY.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DdUg_zhK.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=N("CheckCheckIcon",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=N("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=N("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=N("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=N("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),he={class:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100 dark:from-gray-900 dark:via-blue-900/20 dark:to-indigo-900/20"},_e={class:"w-full max-w-6xl mx-auto p-4 lg:p-6"},ye={class:"bg-white/80 dark:bg-gray-900/60 rounded-2xl shadow-xl border border-gray-200/60 dark:border-gray-700/60 overflow-hidden"},be={class:"relative bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 p-5"},ke={class:"flex items-center gap-3"},we={class:"relative"},Ce={class:"w-12 h-12 bg-white/20 rounded-2xl grid place-items-center border border-white/30"},Ne={key:0,class:"absolute -top-2 -right-2 w-7 h-7 bg-red-500 rounded-full grid place-items-center text-white text-xs font-bold"},Se={class:"min-w-0"},$e={class:"text-white/80 text-sm truncate"},Ae={class:"text-white/70 text-xs"},Me={class:"ml-auto flex items-center gap-2"},je={class:"px-4 py-2 border-b border-gray-200/60 dark:border-gray-700/60 flex items-center gap-3"},ze={key:0,class:"flex items-center gap-2"},De={class:"ml-auto flex items-center gap-2 text-xs text-gray-500"},Ie={class:"grid grid-cols-1 lg:grid-cols-[380px_minmax(0,1fr)]"},Ue={class:"min-h-[60vh] max-h-[72vh] overflow-y-auto divide-y divide-gray-200/60 dark:divide-gray-700/60"},Te=["onClick"],Ve={class:"flex items-center gap-3"},Be={class:"flex-shrink-0"},Re=["src"],Fe={class:"min-w-0 flex-1"},qe={class:"flex items-center gap-2"},Ee={key:0,class:"text-[10px] px-1.5 py-0.5 rounded bg-indigo-100 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-300"},Le={class:"text-xs text-gray-600 dark:text-gray-300 truncate"},Pe={class:"flex flex-col items-end gap-1"},He={class:"text-[11px] text-gray-500"},Je=["onClick"],We={key:0,class:"p-8 text-center text-sm text-gray-500"},Ke={class:"min-h-[60vh] max-h-[72vh] overflow-y-auto border-t lg:border-t-0 lg:border-l border-gray-200/60 dark:border-gray-700/60"},Oe={key:0,class:"p-4 lg:p-6"},Xe={class:"flex items-start justify-between mb-3"},Ge={class:"text-base lg:text-lg font-semibold"},Qe={key:0,class:"rounded-xl border border-gray-200/60 dark:border-gray-700/60 p-4 bg-white/70 dark:bg-gray-800/50 space-y-3"},Ye={class:"flex items-center gap-3"},Ze=["src"],et={key:1,class:"w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 text-white grid place-items-center font-bold"},tt={class:"min-w-0"},at={class:"flex items-center gap-2"},ot={class:"font-semibold text-sm truncate"},st={class:"text-xs text-gray-500"},rt={class:"font-medium"},it={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs text-gray-700 dark:text-gray-300"},lt={class:"flex items-center gap-2"},nt={key:0,class:"flex items-center gap-2"},dt={class:"flex flex-wrap items-center gap-2 pt-2"},ct={key:1,class:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed"},ut={class:"mt-4 flex items-center gap-2 text-xs text-gray-500"},gt={key:1,class:"h-full grid place-items-center p-8 text-sm text-gray-500"},pt={class:"px-4 py-3 border-t border-gray-200/60 dark:border-gray-700/60 text-xs text-gray-500 flex items-center justify-between"},kt=Z({__name:"Index",props:{user:{},unreadNotifications:{},allNotifications:{},unreadCount:{}},setup(F){const q=le(),g=F,c=A([]),b=A("all"),S=A("compact"),$=A(null),E=t=>({"App\\Notifications\\MessageNotification":{icon:z,color:"from-blue-500 to-blue-600",bgColor:"bg-blue-100",iconColor:"text-blue-600"},"App\\Notifications\\SystemNotification":{icon:ue,color:"from-orange-500 to-orange-600",bgColor:"bg-orange-100",iconColor:"text-orange-600"},"App\\Notifications\\ReminderNotification":{icon:ge,color:"from-green-500 to-green-600",bgColor:"bg-green-100",iconColor:"text-green-600"},"App\\Notifications\\AlertNotification":{icon:ve,color:"from-red-500 to-red-600",bgColor:"bg-red-100",iconColor:"text-red-600"},"App\\Notifications\\DocumentNotification":{icon:T,color:"from-purple-500 to-purple-600",bgColor:"bg-purple-100",iconColor:"text-purple-600"},"App\\Notifications\\UserNotification":{icon:ce,color:"from-indigo-500 to-indigo-600",bgColor:"bg-indigo-100",iconColor:"text-indigo-600"}})[t]||{icon:U,color:"from-gray-500 to-gray-600",bgColor:"bg-gray-100",iconColor:"text-gray-600"},L=t=>{const e=new Date(t),x=Math.floor((new Date().getTime()-e.getTime())/(1e3*60));if(x<1)return"Just now";if(x<60)return`${x}m ago`;const j=Math.floor(x/60);if(j<24)return`${j}h ago`;const I=Math.floor(j/24);return I<7?`${I}d ago`:e.toLocaleDateString()},m=_(()=>g.allNotifications.data.map(t=>{const e=E(t.type);return{id:t.id,type:t.type,title:t.data.title||"Notification",description:t.data.message||t.data.body||"No description available",time:L(t.created_at),read_at:t.read_at,icon:e.icon,color:e.color,bgColor:e.bgColor,iconColor:e.iconColor,avatar:t.data.user?.avatar||null,userName:t.data.user?.name||null,priority:t.read_at?"low":"medium",raw:t}})),P=_(()=>m.value.filter(t=>!t.read_at)),h=_(()=>b.value==="unread"?P.value:b.value==="read"?m.value.filter(t=>t.read_at):m.value),r=_(()=>m.value.find(t=>t.id===$.value)||null),D=_(()=>h.value.length>0&&c.value.length===h.value.length),H=_(()=>c.value.length>0);ee(()=>{m.value.length&&($.value=m.value.find(t=>!t.read_at)?.id??m.value[0].id)});const J=t=>({high:"bg-red-500 animate-pulse",medium:"bg-yellow-500",low:"bg-green-500"})[t],W=t=>{if(t.raw?.data?.type==="job_interest"){const e=t.raw.data.user||{},o=t.raw.data.job||{},x=e?.licence_status?` â€¢ ${e.licence_status} license`:"";return`${e?.email??""} â€¢ ${e?.contacts??""} â€¢ ${o?.title??""}${x}`}return t.description},K=()=>{D.value?c.value=[]:c.value=h.value.map(t=>t.id)},O=t=>{const e=c.value.indexOf(t);e>-1?c.value.splice(e,1):c.value.push(t)},M=t=>{t?C.patch(`/notifications/${t}/read`,{},{preserveState:!0,preserveScroll:!0}):C.patch("/notifications/mark-selected-read",{notification_ids:c.value},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{c.value=[]}})},X=()=>{C.patch("/notifications/mark-all-read",{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{c.value=[]}})},G=()=>{C.delete("/notifications/delete-selected",{data:{notification_ids:c.value},preserveState:!0,preserveScroll:!0,onSuccess:()=>{c.value=[]}})},Q=t=>{C.delete(`/notifications/${t}`,{preserveState:!0,preserveScroll:!0})},Y=t=>{$.value=t;const e=m.value.find(o=>o.id===t);e&&!e.read_at&&M(t)};return(t,e)=>(l(),k(de,null,{default:p(()=>[n(s(te),{title:"Notifications"}),a("div",he,[a("div",_e,[a("div",ye,[a("div",be,[a("div",ke,[a("div",we,[a("div",Ce,[n(s(U),{class:"w-6 h-6 text-white"})]),g.unreadCount>0?(l(),d("div",Ne,i(g.unreadCount),1)):v("",!0)]),a("div",Se,[e[8]||(e[8]=a("h1",{class:"text-2xl font-semibold text-white"},"Notifications",-1)),a("p",$e,i(g.unreadCount)+" unread â€¢ "+i(g.allNotifications.total)+" total",1),a("p",Ae,"Welcome back, "+i(s(q).name)+"! ðŸ‘‹",1)]),a("div",Me,[ae(a("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>b.value=o),class:"bg-white/90 dark:bg-gray-800 border border-white/40 dark:border-gray-700 rounded-lg px-2.5 py-1.5 text-xs font-medium"},e[9]||(e[9]=[a("option",{value:"all"},"All",-1),a("option",{value:"unread"},"Unread",-1),a("option",{value:"read"},"Read",-1)]),512),[[oe,b.value]]),g.unreadCount>0?(l(),k(s(f),{key:0,onClick:X,size:"sm",class:"h-8 px-3 text-xs bg-white text-indigo-700 hover:bg-white/90 rounded-lg"},{default:p(()=>[n(s(pe),{class:"w-4 h-4 mr-1"}),e[10]||(e[10]=u(" Mark all read ",-1))]),_:1,__:[10]})):v("",!0)])])]),a("div",je,[n(s(V),{checked:D.value,"onUpdate:checked":K,class:"rounded-md"},null,8,["checked"]),e[12]||(e[12]=a("span",{class:"text-xs text-gray-600 dark:text-gray-300"},"Select all",-1)),H.value?(l(),d("div",ze,[n(s(f),{onClick:e[1]||(e[1]=o=>M()),variant:"outline",size:"sm",class:"h-8 px-2 text-xs"},{default:p(()=>[n(s(B),{class:"w-4 h-4 mr-1"}),u(" Mark read ("+i(c.value.length)+") ",1)]),_:1}),n(s(f),{onClick:G,variant:"outline",size:"sm",class:"h-8 px-2 text-xs"},{default:p(()=>[n(s(fe),{class:"w-4 h-4 mr-1"}),e[11]||(e[11]=u(" Delete ",-1))]),_:1,__:[11]})])):v("",!0),a("div",De,[n(s(xe),{class:"w-4 h-4"}),n(s(f),{variant:"ghost",size:"sm",class:"h-8 px-2 text-xs",onClick:e[2]||(e[2]=o=>S.value=S.value==="compact"?"cozy":"compact")},{default:p(()=>[u(i(S.value==="compact"?"Cozy view":"Compact view"),1)]),_:1})])]),a("div",Ie,[a("div",Ue,[(l(!0),d(se,null,re(h.value,o=>(l(),d("div",{key:o.id,class:y(["relative cursor-pointer hover:bg-indigo-50/60 dark:hover:bg-indigo-900/10",["px-3",S.value==="compact"?"py-2":"py-3",$.value===o.id?"bg-indigo-50/80 dark:bg-indigo-900/20":""]]),onClick:x=>Y(o.id)},[a("div",Ve,[n(s(V),{checked:c.value.includes(o.id),"onUpdate:checked":()=>O(o.id),onClick:e[3]||(e[3]=w(()=>{},["stop"])),class:"rounded-md"},null,8,["checked","onUpdate:checked"]),a("div",Be,[o.avatar?(l(),d("img",{key:0,src:o.avatar,class:"w-8 h-8 rounded-lg object-cover"},null,8,Re)):(l(),d("div",{key:1,class:y(["w-8 h-8 rounded-lg grid place-items-center",o.bgColor])},[(l(),k(ie(o.icon),{class:y(["w-4 h-4",o.iconColor])},null,8,["class"]))],2))]),a("div",Fe,[a("div",qe,[a("h4",{class:y(["text-sm font-semibold truncate",o.read_at?"text-gray-500":"text-gray-900 dark:text-white"])},i(o.title),3),o.read_at?v("",!0):(l(),d("span",Ee," NEW "))]),a("p",Le,i(W(o)),1)]),a("div",Pe,[a("span",He,i(o.time),1),a("button",{class:"opacity-60 hover:opacity-100",onClick:w(x=>Q(o.id),["stop"]),title:"Remove"},[n(s(ne),{class:"w-4 h-4 text-gray-400 hover:text-red-500"})],8,Je)])]),a("div",{class:y(["absolute left-1 top-1 w-2 h-2 rounded-full",J(o.priority)])},null,2)],10,Te))),128)),h.value.length===0?(l(),d("div",We," No "+i(b.value)+" notifications. ",1)):v("",!0)]),a("div",Ke,[r.value?(l(),d("div",Oe,[a("div",Xe,[a("h3",Ge,i(r.value.title),1),r.value.read_at?v("",!0):(l(),k(s(f),{key:0,onClick:e[4]||(e[4]=o=>M(r.value.id)),variant:"ghost",size:"sm",class:"h-8 px-3 text-xs"},{default:p(()=>[n(s(B),{class:"w-4 h-4 mr-1"}),e[13]||(e[13]=u(" Mark read ",-1))]),_:1,__:[13]}))]),r.value.raw.data.type==="job_interest"?(l(),d("div",Qe,[a("div",Ye,[r.value.raw.data.user.avatar?(l(),d("img",{key:0,src:r.value.raw.data.user.avatar,class:"w-10 h-10 rounded-lg object-cover"},null,8,Ze)):(l(),d("div",et,i(r.value.raw.data.user.name.charAt(0).toUpperCase()),1)),a("div",tt,[a("div",at,[a("p",ot,i(r.value.raw.data.user.name),1),r.value.raw.data.user.licence_status?(l(),d("span",{key:0,class:y(["text-[10px] px-2 py-0.5 rounded-full",r.value.raw.data.user.licence_status==="active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"])},i(r.value.raw.data.user.licence_status)+" license ",3)):v("",!0)]),a("p",st,[e[14]||(e[14]=u("Applied for: ",-1)),a("span",rt,i(r.value.raw.data.job.title),1)])])]),a("div",it,[a("div",lt,[n(s(z),{class:"w-3 h-3"}),u(" "+i(r.value.raw.data.user.email),1)]),r.value.raw.data.user.contacts?(l(),d("div",nt,[n(s(R),{class:"w-3 h-3"}),u(" "+i(r.value.raw.data.user.contacts),1)])):v("",!0)]),a("div",dt,[n(s(f),{onClick:e[5]||(e[5]=w(o=>t.window.open(`mailto:${r.value.raw.data.user.email}?subject=Regarding your application for ${r.value.raw.data.job.title}`,"_blank"),["stop"])),variant:"outline",size:"sm",class:"h-8 px-3 text-xs"},{default:p(()=>[n(s(z),{class:"w-4 h-4 mr-1"}),e[15]||(e[15]=u(" Email ",-1))]),_:1,__:[15]}),r.value.raw.data.user.contacts?(l(),k(s(f),{key:0,onClick:e[6]||(e[6]=w(o=>t.window.open(`tel:${r.value.raw.data.user.contacts}`,"_self"),["stop"])),variant:"outline",size:"sm",class:"h-8 px-3 text-xs"},{default:p(()=>[n(s(R),{class:"w-4 h-4 mr-1"}),e[16]||(e[16]=u(" Call ",-1))]),_:1,__:[16]})):v("",!0),n(s(f),{onClick:e[7]||(e[7]=w(o=>t.window.open(r.value.raw.data.action_url,"_blank"),["stop"])),variant:"outline",size:"sm",class:"h-8 px-3 text-xs"},{default:p(()=>[n(s(T),{class:"w-4 h-4 mr-1"}),e[17]||(e[17]=u(" View Job ",-1))]),_:1,__:[17]})])])):(l(),d("p",ct,i(r.value.description),1)),a("div",ut,[n(s(me),{class:"w-3 h-3"}),a("span",null,i(r.value.time),1)])])):(l(),d("div",gt," Select a notification to preview details. "))])]),a("div",pt,[a("span",null,"Showing "+i(h.value.length)+" of "+i(g.allNotifications.total),1),a("span",null,"Page "+i(g.allNotifications.current_page)+" of "+i(g.allNotifications.last_page),1)])])])])]),_:1}))}});export{kt as default};
