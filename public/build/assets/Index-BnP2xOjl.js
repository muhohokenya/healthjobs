import{d as L,j as D,s as v,e as m,o as l,w as x,a as d,b as e,u as s,h as H,t as n,c as i,m as c,g as S,v as E,z as J,F as O,r as Y,q as y,f as G,B as K,A as k}from"./app-BMeZD6Lu.js";import{B as C,_ as P,U as Q,F as W,S as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-7EIq1LC5.js";import{c as _,_ as f}from"./index-C5W6DpGF.js";import{_ as I,C as A}from"./Checkbox.vue_vue_type_script_setup_true_lang-KOk_1Gd1.js";import{C as Z,M as ee}from"./mail-BNJZCmbb.js";import"./useForwardExpose-6Nl_pOGx.js";import"./VisuallyHidden-4YEK4pGr.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DXpHdhyk.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=_("CheckCheckIcon",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=_("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=_("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=_("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),oe={class:"p-6 max-w-4xl mx-auto"},le={class:"mb-8"},de={class:"flex items-center gap-3 mb-2"},ie={class:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg"},ne={class:"text-gray-600 dark:text-gray-400"},ce={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 mb-6 shadow-sm"},ue={class:"flex items-center justify-between gap-4"},ge={class:"flex items-center gap-4"},pe={class:"flex items-center gap-2"},he={key:0,class:"flex items-center gap-2"},ve={class:"flex items-center gap-2"},xe={class:"space-y-3"},be={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-8 text-center shadow-sm"},me={class:"text-gray-600 dark:text-gray-400"},ye={class:"flex gap-4"},ke={class:"flex items-start pt-1"},fe={class:"flex-shrink-0 relative"},_e={key:0,class:"relative"},we=["src","alt"],Ne={key:0,class:"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full border-2 border-white dark:border-gray-800"},Se={key:0,class:"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full border-2 border-white dark:border-gray-800"},Ce={class:"flex-1 min-w-0"},Ae={class:"flex items-start justify-between gap-4"},Me={class:"flex-1"},$e={class:"flex items-center gap-2"},De={class:"text-xs text-gray-500 dark:text-gray-400"},Ie={key:0,class:"flex items-center gap-1 ml-2"},Ue={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},Te={class:"mt-8 text-center text-sm text-gray-500 dark:text-gray-400"},He=L({__name:"Index",props:{unreadNotifications:{},allNotifications:{},unreadCount:{}},setup(U){const p=U,o=D([]),h=D("all"),T=a=>({"App\\Notifications\\MessageNotification":{icon:ee,color:"bg-blue-500"},"App\\Notifications\\SystemNotification":{icon:X,color:"bg-orange-500"},"App\\Notifications\\ReminderNotification":{icon:Z,color:"bg-green-500"},"App\\Notifications\\AlertNotification":{icon:ae,color:"bg-red-500"},"App\\Notifications\\DocumentNotification":{icon:W,color:"bg-purple-500"},"App\\Notifications\\UserNotification":{icon:Q,color:"bg-indigo-500"}})[a]||{icon:C,color:"bg-gray-500"},B=a=>{const t=new Date(a),g=Math.floor((new Date().getTime()-t.getTime())/(1e3*60));if(g<1)return"Just now";if(g<60)return`${g} minute${g>1?"s":""} ago`;const b=Math.floor(g/60);if(b<24)return`${b} hour${b>1?"s":""} ago`;const N=Math.floor(b/24);return N<7?`${N} day${N>1?"s":""} ago`:t.toLocaleDateString()},w=v(()=>p.allNotifications.data.map(a=>{const t=T(a.type);return{id:a.id,type:a.type,title:a.data.title||"Notification",description:a.data.message||a.data.body||"No description available",time:B(a.created_at),read_at:a.read_at,icon:t.icon,color:t.color,avatar:a.data.user?.avatar||null,raw:a}})),R=v(()=>w.value.filter(a=>!a.read_at)),u=v(()=>h.value==="unread"?R.value:h.value==="read"?w.value.filter(a=>a.read_at):w.value),M=v(()=>u.value.length>0&&o.value.length===u.value.length),V=v(()=>o.value.length>0),z=()=>{M.value?o.value=[]:o.value=u.value.map(a=>a.id)},j=a=>{const t=o.value.indexOf(a);t>-1?o.value.splice(t,1):o.value.push(a)},$=a=>{a?k.patch(`/notifications/${a}/read`,{},{preserveState:!0,preserveScroll:!0}):k.patch("/notifications/mark-selected-read",{notification_ids:o.value},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{o.value=[]}})},q=()=>{k.patch("/notifications/mark-all-read",{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{o.value=[]}})},F=()=>{k.delete("/notifications/delete-selected",{data:{notification_ids:o.value},preserveState:!0,preserveScroll:!0,onSuccess:()=>{o.value=[]}})};return(a,t)=>(l(),m(P,null,{default:x(()=>[d(s(H),{title:"Notifications"}),e("div",oe,[e("div",le,[e("div",de,[e("div",ie,[d(s(C),{class:"h-6 w-6 text-blue-600 dark:text-blue-400"})]),e("div",null,[t[2]||(t[2]=e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Notifications",-1)),e("p",ne,n(p.unreadCount)+" unread of "+n(p.allNotifications.total)+" total ",1)])])]),e("div",ce,[e("div",ue,[e("div",ge,[e("div",pe,[d(s(I),{checked:M.value,"onUpdate:checked":z,class:"rounded"},null,8,["checked"]),t[3]||(t[3]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Select All ",-1))]),V.value?(l(),i("div",he,[d(s(f),{onClick:t[0]||(t[0]=r=>$()),variant:"outline",size:"sm",class:"gap-2 text-green-700 border-green-200 hover:bg-green-50 dark:text-green-400 dark:border-green-800 dark:hover:bg-green-900/20"},{default:x(()=>[d(s(A),{class:"h-4 w-4"}),t[4]||(t[4]=S(" Mark Selected Read ",-1))]),_:1,__:[4]}),d(s(f),{onClick:F,variant:"outline",size:"sm",class:"gap-2 text-red-700 border-red-200 hover:bg-red-50 dark:text-red-400 dark:border-red-800 dark:hover:bg-red-900/20"},{default:x(()=>[d(s(se),{class:"h-4 w-4"}),t[5]||(t[5]=S(" Delete Selected ",-1))]),_:1,__:[5]})])):c("",!0)]),e("div",ve,[E(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>h.value=r),class:"px-3 py-1.5 text-sm border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"},t[6]||(t[6]=[e("option",{value:"all"},"All",-1),e("option",{value:"unread"},"Unread",-1),e("option",{value:"read"},"Read",-1)]),512),[[J,h.value]]),p.unreadCount>0?(l(),m(s(f),{key:0,onClick:q,class:"gap-2 bg-blue-600 hover:bg-blue-700 text-white",size:"sm"},{default:x(()=>[d(s(te),{class:"h-4 w-4"}),t[7]||(t[7]=S(" Mark All Read ",-1))]),_:1,__:[7]})):c("",!0)])])]),e("div",xe,[u.value.length===0?(l(),i("div",be,[d(s(C),{class:"h-12 w-12 text-gray-400 mx-auto mb-3"}),t[8]||(t[8]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-1"},"No notifications",-1)),e("p",me,n(h.value==="unread"?"All caught up! No unread notifications.":"You have no notifications yet."),1)])):c("",!0),(l(!0),i(O,null,Y(u.value,r=>(l(),i("div",{key:r.id,class:y(["bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 shadow-sm transition-all duration-200 hover:shadow-md cursor-pointer group",!r.read_at&&"ring-2 ring-blue-100 dark:ring-blue-900/50 bg-blue-50/50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800",o.value.includes(r.id)&&"ring-2 ring-blue-500 dark:ring-blue-400 bg-blue-50 dark:bg-blue-950/30"])},[e("div",ye,[e("div",ke,[d(s(I),{checked:o.value.includes(r.id),"onUpdate:checked":()=>j(r.id),class:"rounded"},null,8,["checked","onUpdate:checked"])]),e("div",fe,[r.avatar?(l(),i("div",_e,[e("img",{src:r.avatar,alt:r.title,class:"w-10 h-10 rounded-full object-cover border-2 border-white dark:border-gray-700 shadow-sm"},null,8,we),r.read_at?c("",!0):(l(),i("div",Ne))])):(l(),i("div",{key:1,class:y(["p-2 rounded-lg",r.color])},[(l(),m(G(r.icon),{class:"h-5 w-5 text-white"})),r.read_at?c("",!0):(l(),i("div",Se))],2))]),e("div",Ce,[e("div",Ae,[e("div",Me,[e("h3",{class:y(["font-semibold text-gray-900 dark:text-white mb-1 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",!r.read_at&&"text-gray-900 dark:text-white"])},n(r.title),3),e("p",{class:y(["text-sm text-gray-600 dark:text-gray-400 leading-relaxed mb-2",!r.read_at&&"text-gray-700 dark:text-gray-300"])},n(r.description),3),e("div",$e,[d(s(re),{class:"h-3 w-3 text-gray-400"}),e("span",De,n(r.time),1),r.read_at?(l(),i("div",Ie,[d(s(A),{class:"h-3 w-3 text-green-500"}),t[9]||(t[9]=e("span",{class:"text-xs text-green-600 dark:text-green-400"},"Read",-1))])):c("",!0)])]),e("div",Ue,[r.read_at?c("",!0):(l(),m(s(f),{key:0,onClick:K(g=>$(r.id),["stop"]),variant:"ghost",size:"sm",class:"h-8 w-8 p-0 text-green-600 hover:bg-green-100 dark:text-green-400 dark:hover:bg-green-900/20"},{default:x(()=>[d(s(A),{class:"h-4 w-4"})]),_:2},1032,["onClick"]))])])])])],2))),128))]),e("div",Te," Showing "+n(u.value.length)+" of "+n(p.allNotifications.total)+" notifications ",1)])]),_:1}))}});export{He as default};
